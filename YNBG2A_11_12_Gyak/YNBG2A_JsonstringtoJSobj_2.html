<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON String konvertálása JavaScript objektummá</title>
  </head>
  <body>
    <div class="container">
      <h1>JSON String konvertálása JS objektummá</h1>
      <p style="text-align: center; color: #666; font-size: 14px">
        Paraméterek: név, irányítószám, város, egyetem
      </p>

      <div class="section">
        <label for="jsonString">JSON String bemenet:</label>
        <textarea
          id="jsonString"
          rows="6"
          placeholder='Adjon meg egy JSON stringet, például: {"nev":"József","iranyitoszam":"1011","varos":"Budapest","egyetem":"ELTE"}'
        ></textarea>

        <button onclick="konvertal()">
          Konvertálás JSON.parse() segítségével
        </button>
        <button onclick="mintabetoltes()" style="background-color: #2196f3">
          Minta betöltése
        </button>
      </div>

      <div class="output" id="output" style="display: none">
        <h3>Eredmény:</h3>
        <div id="result"></div>
      </div>
    </div>

    <script>
      const mintaJsonok = [
        '{"nev":"József","iranyitoszam":"1011","varos":"Budapest","egyetem":"ELTE"}',
        '{"nev":"Mari","iranyitoszam":"6726","varos":"Szeged","egyetem":"SZTE"}',
        '{"nev":"Péter","iranyitoszam":"8000","varos":"Székesfehérvár","egyetem":"BME"}',
        '{"nev":"Anna","iranyitoszam":"2000","varos":"Szentendre","egyetem":"PPKE"}',
        '[{"nev":"Anna","iranyitoszam":"2000","varos":"Szentendre","egyetem":"PPKE"},{"nev":"Tamás","iranyitoszam":"4026","varos":"Debrecen","egyetem":"DE"}]',
      ];

      window.addEventListener('load', function () {
        document.getElementById('jsonString').value = mintaJsonok[0];
      });

      function konvertal() {
        const jsonString = document.getElementById('jsonString').value.trim();
        const resultDiv = document.getElementById('result');
        const outputDiv = document.getElementById('output');

        if (!jsonString) {
          resultDiv.innerHTML =
            '<div class="error">Hiba: Kérem adjon meg egy JSON stringet!</div>';
          outputDiv.style.display = 'block';
          return;
        }

        try {
          const jsObjektum = JSON.parse(jsonString);

          let kijelzes =
            '<div class="success"><strong>✓ Sikeres konvertálás!</strong></div>';
          kijelzes += '<h4>JS Objektum:</h4>';
          kijelzes += '<pre>' + JSON.stringify(jsObjektum, null, 2) + '</pre>';

          kijelzes += '<h4>Objektum típusa:</h4>';
          kijelzes +=
            '<p><strong>' +
            (Array.isArray(jsObjektum) ? 'Tömb' : 'Objektum') +
            '</strong></p>';

          kijelzes += '<h4>Objektum tartalma:</h4>';
          kijelzes += '<pre>' + JSON.stringify(jsObjektum, null, 2) + '</pre>';

          kijelzes += '<h4>Tulajdonságok elérése JavaScript-ben:</h4>';
          kijelzes += '<pre>';
          if (Array.isArray(jsObjektum)) {
            kijelzes += 'Tömb hossza: ' + jsObjektum.length + '\n\n';
            jsObjektum.forEach((elem, index) => {
              kijelzes += '--- ' + index + '. elem ---\n';
              if (typeof elem === 'object' && elem !== null) {
                const kulcsok = Object.keys(elem);
                kulcsok.forEach((kulcs) => {
                  kijelzes +=
                    'tomb[' +
                    index +
                    '].' +
                    kulcs +
                    ' = "' +
                    elem[kulcs] +
                    '"\n';
                });
              }
              kijelzes += '\n';
            });
          } else {
            const kulcsok = Object.keys(jsObjektum);
            kulcsok.forEach((kulcs) => {
              kijelzes +=
                'objektum.' + kulcs + ' = "' + jsObjektum[kulcs] + '"\n';
            });
          }
          kijelzes += '</pre>';

          resultDiv.innerHTML = kijelzes;
          outputDiv.style.display = 'block';
        } catch (hiba) {
          let hibauzenet = '<div class="error">';
          hibauzenet += '<strong>✗ Hiba a konvertálás során:</strong><br>';
          hibauzenet += hiba.message + '<br><br>';
          hibauzenet += '<strong>Helyes JSON formátum példái:</strong><br>';
          hibauzenet +=
            '• {"nev":"József","iranyitoszam":"1011","varos":"Budapest","egyetem":"ELTE"}<br>';
          hibauzenet +=
            '• [{"nev":"Anna","varos":"Szeged"},{"nev":"Péter","varos":"Budapest"}]<br>';
          hibauzenet += '• {"szoveg":"Hello","szam":42,"logikai":true}';
          hibauzenet += '</div>';

          resultDiv.innerHTML = hibauzenet;
          outputDiv.style.display = 'block';
        }
      }

      function mintabetoltes() {
        const index = Math.floor(Math.random() * mintaJsonok.length);
        document.getElementById('jsonString').value = mintaJsonok[index];
      }

      document
        .getElementById('jsonString')
        .addEventListener('keypress', function (event) {
          if (event.key === 'Enter' && event.ctrlKey) {
            konvertal();
          }
        });
    </script>
  </body>
</html>
